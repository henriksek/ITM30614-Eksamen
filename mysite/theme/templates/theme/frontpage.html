{% extends 'theme/base.html' %}

{% block pagecontent %}
    <section id="message_listings">
        <div>
            <h3>All messages:</h3>
            {% for msg in messages %}
                <div class="panel panel-primary">
                    <div class="panel-heading">{{msg.created_by.first_name}} {{msg.created_by.last_name}} <small>@{{msg.created_by.username}}</small></div>
                    <div class="panel-body">{{msg.content}}</div>
                </div>
            {% endfor %}
        </div>
    </section>
    {% if user.is_anonymous %}
    <section id="user_auth">
        <div>
            <h3>Log in:</h3>
            
            {% if login_failed %}
                <div class="alert alert-danger" role="alert">Login failed. Please try again!</div>
            {% endif %}
            
            <form method="post" action="/useraccounts/login/">
                {% csrf_token %}
                <div class="form-group">
                    <input class="form-control" type="text" name="username" id="loginUsername" placeholder="Username">
                </div>
                
                <div class="form-group">
                    <input class="form-control" type="password" name="password" id="loginPassword" placeholder="Password">
                </div>
                
                <div class="form-group">
                    <button class="btn btn-default" type="submit">Log in</button>
                </div>
            </form>
        </div>
        
        <div>
            <h3>Register new user</h3>
            
            {% if register_successfull %}
                <div class="alert alert-success" role="alert">User successfully created!</div>
            {% endif %}
            
            {% if username_taken %}
                <div class="alert alert-danger" role="alert">Username allready taken!</div>
            {% endif %}
            
            {% if email_taken %}
                <div class="alert alert-danger" role="alert">Email allready taken!</div>
            {% endif %}
            
            <form method="post" action="/useraccounts/register/">
                {% csrf_token %}
                <div class="form-group">
                    <input class="form-control" type="text" name="username" id="registerUsername" placeholder="Username">
                </div>
                
                <div class="form-group">
                    <input class="form-control" type="email" name="email" id="registerEmail" placeholder="Email address">
                </div>
                
                <div class="form-group">
                    <input class="form-control" type="text" name="firstname" id="registerFirstname" placeholder="Firstname">
                </div>
                
                <div class="form-group">
                    <input class="form-control" type="text" name="lastname" id="registerLastname" placeholder="Lastname">
                </div>
                
                <div class="form-group">
                    <input class="form-control" type="password" name="password" id="registerPassword" placeholder="Password">
                </div>
                
                <div class="form-group">
                    <button class="btn btn-default" type="submit">Register</button>
                </div>
            </form>
        </div>
    </section>
    {% endif %}
{% endblock %}